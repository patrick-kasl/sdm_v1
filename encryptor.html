<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>HTML Page Encryptor</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <style>
        body { font-family: sans-serif; padding: 40px; background: #f4f4f4; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        textarea { width: 100%; height: 200px; padding: 10px; margin-bottom: 20px; border: 1px solid #ddd; border-radius: 4px; font-family: monospace; }
        input { width: 100%; padding: 10px; margin-bottom: 20px; border: 1px solid #ddd; border-radius: 4px; }
        button { background: #6c5ce7; color: white; border: none; padding: 12px 24px; cursor: pointer; border-radius: 4px; font-size: 16px; }
        button:hover { background: #5b4cc4; }
        h2 { margin-top: 0; }
        .step { margin-bottom: 20px; border-bottom: 1px solid #eee; padding-bottom: 20px; }
    </style>
</head>
<body>

<div class="container">
    <h2>Step 1: Paste Your Source Code</h2>
    <p>Paste the entire HTML content (the SDM Analyzer code) into the box below.</p>
    <textarea id="sourceCode" placeholder="<!DOCTYPE html>..."></textarea>

    <h2>Step 2: Set Password</h2>
    <input type="text" id="password" placeholder="Enter the password to unlock the page">

    <h2>Step 3: Generate Protected File</h2>
    <button onclick="generate()">Download Protected HTML</button>
</div>

<script>
    function generate() {
        const source = document.getElementById('sourceCode').value;
        const pass = document.getElementById('password').value;

        if(!source || !pass) { alert("Please fill in source code and password."); return; }

        // Encrypt the code
        const encrypted = CryptoJS.AES.encrypt(source, pass).toString();

        // The template for the protected page
        const template = `<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Restricted Access</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"><\/script>
    <style>
        body{font-family:'Segoe UI',sans-serif;background:#f8f9fa;height:100vh;display:flex;align-items:center;justify-content:center;margin:0}
        .login-box{background:white;padding:40px;border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,0.1);text-align:center;width:300px}
        input{width:100%;padding:10px;margin:15px 0;border:1px solid #ddd;border-radius:4px;box-sizing:border-box}
        button{background:#6c5ce7;color:white;border:none;padding:12px;width:100%;border-radius:4px;cursor:pointer;font-weight:bold}
        button:hover{background:#5b4cc4}
        .err{color:red;font-size:12px;display:none;margin-top:10px}
    </style>
</head>
<body>
    <div class="login-box">
        <h3>Protected Page</h3>
        <p style="color:#666;font-size:14px">Enter password to view SDM Analyzer</p>
        <input type="password" id="p" placeholder="Password" onkeydown="if(event.key==='Enter') decrypt()">
        <button onclick="decrypt()">Unlock</button>
        <div id="msg" class="err">Incorrect Password</div>
    </div>

    <script>
        var content = "${encrypted}";
        
        function decrypt() {
            var pass = document.getElementById('p').value;
            try {
                var decrypted = CryptoJS.AES.decrypt(content, pass).toString(CryptoJS.enc.Utf8);
                if (decrypted && decrypted.indexOf("<!DOCTYPE html>") !== -1) {
                    document.open();
                    document.write(decrypted);
                    document.close();
                } else {
                    throw new Error("Fail");
                }
            } catch (e) {
                document.getElementById('msg').style.display = 'block';
                document.getElementById('p').value = '';
            }
        }
    <\/script>
</body>
</html>`;

        // Trigger download
        const blob = new Blob([template], { type: 'text/html' });
        const link = document.createElement('a');
        link.href = URL.createObjectURL(blob);
        link.download = 'index.html';
        link.click();
    }
</script>

</body>
</html>